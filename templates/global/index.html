<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        {% include './partials/_head.html'%}
    </head>
    <body>
        <div class="form-container">
            <h2>Adicionar ao Catálogo</h2>
            <form id="catalogForm">
                <label for="name">Nome:</label>
                <input type="text" id="name" name="name" placeholder="Digite o nome" required>

                <label for="gender">Tipo:</label>
                <select id="gender" name="type" required>
                    <option value="filme">Filme</option>
                    <option value="serie">Série</option>
                    <option value="anime">Anime</option>
                </select>

                <label for="rating">Nota:</label>
                <input type="number" id="rating" name="rating" min="0" max="10" step="0.1" placeholder="Dê uma nota" required>

                <button type="submit">Adicionar</button>
            </form>
            <p id="message"></p>
        </div>

        <script>
            document.getElementById('catalogForm').addEventListener('submit', function(event) {
                event.preventDefault();

                // Coleta os dados do formulário
                const formData = new FormData(this);

                // Envia a requisição AJAX
                fetch('', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}'  // Token CSRF para segurança
                    },
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('message').innerText = data.message;
                    this.reset();  // Limpa o formulário após enviar
                })
                .catch(error => console.error('Erro:', error));
            });
        </script>
    </body>
</html>
